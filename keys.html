<html>
<head>
	<title>Key Event Test Page</title>
	
	<style type="text/css">
	span.letter {
	   width: 16px;
	   border: 1px ridge blue;
	   padding: 1px;
	}
	
	span.keyPressed {
		background-color: red;
		font-color: white;
		
	}
	</style>
	
	<script>

        function kd(ev){
	         var evt = window.event ? window.event : ev ; 
			 showEvent( ev);
	         showKeyCode(evt);
        }

        function ku(ev){	
	         var evt = window.event ? window.event : ev ; 
	         showEvent( evt);  
	         showKeyCode(evt);
    }

        function kp(ev){
	         var evt = window.event ? window.event : ev ; 
	         showEvent( evt);
	         showKeyCode(evt);
        }

        function setTimeOutForSpan( id ){
	        window.setTimeout(   "document.getElementById('" + id +"').className='letter'" , 300 );
        }

        function showKeyCode( ev ){
	        var codeBox = document.getElementById('keyCode');
            codeBox.value = ev.keyCode;
            var alt = ev.altKey ? 'yes' : 'no';
            var ctrl = ev.ctrlKey ? 'yes' : 'no';
            var shift=ev.shiftKey ? 'yes' : 'no';

            document.getElementById('shiftkey').value = shift;
			document.getElementById('ctrlkey').value = ctrl;
		    document.getElementById('altkey').value = alt;

            var displayer = document.getElementById('displayer');
            var thisChar = String.fromCharCode( ev.keyCode ); 
			
            displayer.value = displayer.value + thisChar;
            var letterSpan = document.getElementById(thisChar.toLowerCase() );
            if (letterSpan){
	            letterSpan.className='keyPressed';
	            setTimeOutForSpan( thisChar.toLowerCase() );
	  
            }

            tr = addRow( ev.type , ev.keyCode , thisChar, shift , alt, ctrl); 
            var table = document.getElementById('presses'); 
			table.appendChild(tr);
        }

        function addRow( type , keyCode, chr , shift , alt,  ctrl){
		
		    var cells = [];
		    cells[ cells.length ] = addCell( type );
		    cells[ cells.length ] = addCell( keyCode );
		    cells[ cells.length ] = addCell( chr );
		    cells[ cells.length ] = addCell( shift );
		    cells[ cells.length ] = addCell( alt);
		    cells[ cells.length ] = addCell( ctrl );
		
		
			var tr=document.createElement('tr')
			for ( var i=0; i< cells.length; i++){
			    tr.appendChild( cells[i] );
            }
            return tr;
        }
        function addCell( text ){
				var td = document.createElement("td");
				td.className='';
				td.setAttribute("height", "24px");
				td.innerHTML = text;
				return td
        }

        function showEvent( ev ){
            document.getElementById('eventType').value = ev.type;	
        }

        function appendToDisplayer( s ){
	        var displayer= document.getElementById('displayer');
	        displayer.innerHTML = displayer.innerHTML + s; 
        }

    </script>
	
</head>
	
	<body>

        <div style='width:20%; height: 20p; border:2px maroon solid'>
	
	
	        <span id ='1' class='letter'>1</span>
			<span id ='2' class='letter'>2</span>
			<span id ='3' class='letter'>3</span>
			<span id ='4' class='letter'>4</span>
			<span id ='5' class='letter'>5</span>
			<span id ='6' class='letter'>6</span>
			<span id ='7' class='letter'>7</span>
			<span id ='8' class='letter'>8</span>
			<span id ='9' class='letter'>9</span>
	 		<span id ='0' class='letter'>0</span>
	
	         <br>
	        <span id ='q' class='letter'>Q</span>
			<span id ='w' class='letter'>W</span>
			<span id ='e' class='letter'>E</span>
			<span id ='r' class='letter'>R</span>
			<span id ='t' class='letter'>T</span>
			<span id ='y' class='letter'>Y</span>
			<span id ='u' class='letter'>U</span>
			<span id ='i' class='letter'>I</span>
			<span id ='o' class='letter'>O</span>
	 		<span id ='p' class='letter'>P</span>
			
            <br>	
	        <span id ='a' class='letter'>A</span>
			<span id ='s' class='letter'>S</span>
			<span id ='d' class='letter'>D</span>
			<span id ='f' class='letter'>F</span>
			<span id ='g' class='letter'>G</span>
			<span id ='h' class='letter'>H</span>
			<span id ='j' class='letter'>J</span>
			<span id ='k' class='letter'>K</span>
			<span id ='l' class='letter'>L</span>
			
			<br>
			<span id ='z' class='letter'>Z</span>
			<span id ='x' class='letter'>X</span>
			<span id ='c' class='letter'>C</span>
			<span id ='v' class='letter'>V</span>
			<span id ='b' class='letter'>B</span>
			<span id ='n' class='letter'>N</span>
			<span id ='m' class='letter'>M</span>
            <br>
			<span id =' ' class='letter'>  Space  </span>
	
	
	
        </div>
		
		<br><br>
		<div id =entry>
			
			Enter Text Here:<input type = 'text' size = 30 onKeyDown='javascript:kd(event);'  onKeyPress='javascript:kp(event);' onKeyUp='javascript:ku(event);'>
			<br>
			Your Text:<input type=text size = 30 id=displayer style='border:1px red solid; height:20px, width:200px'>
			<br>
			Event: <input type = text id='eventType'> 
			<br>
			KeyCode: <input type = text id=keyCode>  Shift: <input type=text id='shiftkey' value = no> ALT: <input type=text id='altkey' value= no> CTRL: <input type=text id='ctrlkey' value=no>	
		</div>	
		
		<table id=presses border=1>
			<tr>
				<td>Event
				<td>KeyCode
				<td>Key
				<td>Shift
				<td>CTRL
				<td>ALT
			</tr>
		</table>				
		
		
	</body>
</html>		